/* Adtech AdVisibility Main 2.5.6 Copyright 2014 AOL Advertising. */
window.AdtechAdVisibilityTools=window.AdtechAdVisibilityTools||{},window.AdtechAdVisibility=window.AdtechAdVisibility||{},AdtechAdVisibility.EventDispatcher=function(){this.eventTypes={}},AdtechAdVisibility.EventDispatcher.prototype.addEventListener=function(a,b,c){var d,e,f;if("string"!=typeof a||"function"!=typeof b)return!1;for(void 0===this.eventTypes[a]&&(this.eventTypes[a]=[]),e=this.eventTypes[a].length,d=0;e>d;d++)if(f=this.eventTypes[a][d],f.handler===b&&f.context===c)return!1;return this.eventTypes[a].push({context:c,handler:b}),!0},AdtechAdVisibility.EventDispatcher.prototype.removeEventListener=function(a,b,c){var d,e,f;if(void 0===this.eventTypes[a])return!1;for(f=this.eventTypes[a].length,d=0;f>d;d++)if(e=this.eventTypes[a][d],e.handler===b&&e.context===c)return this.eventTypes[a].splice(d,1),!0;return!1},AdtechAdVisibility.EventDispatcher.prototype.dispatchEvent=function(a){var b,c,d;if("string"==typeof a&&(a=new AdtechAdVisibility.AdVisibilityEvent(a)),"string"==typeof a.type&&void 0!==this.eventTypes[a.type])for((void 0===a.target||null===a.target)&&(a.target=this),a.currentTarget=this,b=this.eventTypes[a.type].slice(0),c=0;c<b.length;c++)d=b[c],void 0!==d.context?d.handler.call(d.context,a):d.handler(a)},AdtechAdVisibility.AdVisibilityEvent=function(a){this.type=a,this.target=null,this.currentTarget=null},AdtechAdVisibility.AdVisibilityEvent.prototype.property=function(a,b){return"type"!==a&&"target"!==a&&"currentTarget"!==a&&(this[a]=b),this},AdtechAdVisibility.AdVisibilityEvent.PAGE_SCROLL="pageScroll",AdtechAdVisibility.AdVisibilityEvent.PAGE_RESIZE="pageResize",AdtechAdVisibility.AdVisibilityEvent.PAGE_LOAD="pageLoad",AdtechAdVisibility.AdVisibilityEvent.BANNER_REGISTER="bannerRegister",AdtechAdVisibility.AdVisibilityEvent.IN_VIEWPORT="inViewport",AdtechAdVisibility.AdVisibilityEvent.OUT_VIEWPORT="outViewport",AdtechAdVisibility.AdVisibilityEvent.TIMERS_FLUSHED="timersFlushed",AdtechAdVisibility.AdVisibilityEvent.BLUR="blur",AdtechAdVisibility.AdVisibilityEvent.FOCUS="focus",AdtechAdVisibility.AdVisibilityEvent.VISIBLE_IMPRESSION="visibleImpression",AdtechAdVisibility.AdVisibilityEvent.CUSTOM_VISIBLE_IMPRESSION="customVisibleImpression",AdtechAdVisibility.AdVisibilityEvent.ERROR="error",AdtechAdVisibility.AdVisibilityEvent.NON_FIF_PARENT_VIEWPORT_UPDATE="nonFIFParentViewportUpdate",AdtechAdVisibility.AdVisibilityEvent.NON_FIF_PARENT_FOCUS="nonFIFParentFocus",window.AdtechAdVisibility.Utils=window.AdtechAdVisibility.Utils||{registerNativeEventHandler:function(a,b,c){"function"==typeof a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c)},deregisterNativeEventHandler:function(a,b,c){"function"==typeof a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent("on"+b,c)},createClosure:function(a,b){var c,d;return c=[].slice.call(arguments,2),d=function(){var a,b,c;return a=arguments.callee,b=[].slice.call(arguments),c=a.extraArgs.concat(b,[a]),a.handler.apply(a.target,c)},d.extraArgs=c,d.target=a,d.handler=b,d},extend:function(a,b){var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a,a.supa=b.prototype,b.prototype.constructor=b},getViewportDims:function(a){var b=a?a.document:window.top.document,c=b.documentElement.clientWidth,d="CSS1Compat"===b.compatMode&&c||b.body.clientWidth||c,e=b.documentElement.clientHeight,f="CSS1Compat"===b.compatMode&&e||b.body.clientHeight||e;return{w:d,h:f}}},function(){"use strict";var a;window.AdtechAdVisibilityTools.NonFIFrameMessage||(a=function(a){this.messageInfo=a,this.messageInfo&&(this.messageParts=this.messageInfo.split(window.AdtechAdVisibilityTools.NonFIFrameMessage.DATA_SEPARATOR),this.messageType=this.messageParts[0],this.messageData=this.messageParts[1])},a.DATA_SEPARATOR="|||",a.REGISTER_EVENT="ADTECH.advis.nonFIFRegister",a.NON_FIF_REGISTRATION_COMPLETE="ADTECH.advis.nonFIFRegisterComplete",a.NON_FIF_PARENT_VIEWPORT_UPDATE="ADTECH.advis.nonFIFParentViewportUpdate",a.NON_FIF_PARENT_FOCUS="ADTECH.advis.nonFIFParentFocus",a.DOM_LOAD_TIMEOUT="ADTECH.advis.nonFIFDomLoadTimedOut",a.prototype.getMessageType=function(){return this.messageType},a.prototype.getMessageData=function(){return this.messageData},a.prototype.getMessageParts=function(){return this.messageParts},a.prototype.isRegistrationMessage=function(){return this.messageType===a.REGISTER_EVENT},a.encodeMessage=function(b,c){var d=b+a.DATA_SEPARATOR+c;return d},a.encodeIFrameViewportGeometry=function(a){var b=a.w+","+a.h+","+a.x+","+a.y+","+a.rx+","+a.ry+","+a.winW+","+a.winH;return b},a.decodeIFrameViewportGeometry=function(a){var b=a.split(",");return{w:parseFloat(b[0]),h:parseFloat(b[1]),x:parseFloat(b[2]),y:parseFloat(b[3]),rx:parseFloat(b[4]),ry:parseFloat(b[5]),winW:parseFloat(b[6]),winH:parseFloat(b[7])}},window.AdtechAdVisibilityTools.NonFIFrameMessage=a)}(),AdtechAdVisibility.AdVisibilityUtils=function(){},AdtechAdVisibility.AdVisibilityUtils.getPageOffsets=function(a){var b=a?a.document:window.top.document,c=b.pageXOffset||b.documentElement.scrollLeft||b.body.scrollLeft,d=b.pageYOffset||b.documentElement.scrollTop||b.body.scrollTop;return{x:c,y:d}},AdtechAdVisibility.AdVisibilityUtils.calculateAbsolutePosition=function(a){for(var b=0,c=0;a;)b+=a.offsetTop,c+=a.offsetLeft,a=a.offsetParent;return{x:c,y:b}},AdtechAdVisibility.AdVisibilityUtils.dispatchElementFocusEvent=function(a,b){b&&!a.windowInFocus?(a.windowInFocus=!0,a.dispatchEvent(AdtechAdVisibility.AdVisibilityEvent.FOCUS)):!b&&a.windowInFocus&&(a.windowInFocus=!1,a.dispatchEvent(AdtechAdVisibility.AdVisibilityEvent.BLUR))},AdtechAdVisibility.AdVisibilityUtils.dispatchParentViewportEvent=function(a,b){a.eventData=b,a.dispatchEvent(AdtechAdVisibility.AdVisibilityEvent.NON_FIF_PARENT_VIEWPORT_UPDATE)},AdtechAdVisibility.AdVisibilityUtils.dispatchParentFocusEvent=function(a,b){a.parentWindowInFocus=b,a.dispatchEvent(AdtechAdVisibility.AdVisibilityEvent.NON_FIF_PARENT_FOCUS)},AdtechAdVisibility.AdVisibilityUtils.dispatchErrorEvent=function(a,b){a.error=b,a.dispatchEvent(AdtechAdVisibility.AdVisibilityEvent.ERROR)},AdtechAdVisibility.AdVisibilityUtils.isInIframe=function(a){return a.bannerWindow!=window.top},AdtechAdVisibility.AdVisibilityUtils.isInNestedIframe=function(a){return this.isInIframe(a)?a.bannerWindow.parent!=window.top:!1},AdtechAdVisibility.AdVisibilityUtils.isInFriendlyIframe=function(a,b,c,d){var e=!1,f=!1;try{var g=a.parent.document;g&&(f=!0)}catch(h){}if(f&&(e=!0,b)){var i=this.getTargetParentIframeEle(a.parent,a),j=i.style.display,k=i.getAttribute("display"),l=i.style.width,m=i.getAttribute("width"),n=i.style.height,o=i.getAttribute("height");e="none"===j||"none"===k||0===l&&"null"===m&&0===n&&"null"===o||0===m&&0===o||l===c&&n===d||this.isComparable(m,c,3)&&this.isComparable(o,d,3)}return e},AdtechAdVisibility.AdVisibilityUtils.isComparable=function(a,b,c){var d=a>b?a:b,e=a>b?b:a,f=100-e/d*100;return c>=f},AdtechAdVisibility.AdVisibilityUtils.getTargetParentIframeEle=function(a,b){var c,d,e=a.document.getElementsByTagName("iframe");for(c=0;c<e.length;c++)if(d=e[c],a==b.parent&&d.contentWindow==b||a==b.parent.parent&&d.contentWindow==b.parent||a==b.parent.parent.parent&&d.contentWindow==b.parent.parent)return d},AdtechAdVisibility.AdVisibilityUtils.isValidGeometryStructure=function(a){if(!(a&&a instanceof Array))return!1;for(i=0;i<a.length;i++)if("undefined"!=typeof a[i]&&(void 0===a[i].offset||isNaN(a[i].offset.x)||isNaN(a[i].offset.y)||void 0===a[i].size||isNaN(a[i].size.x)||a[i].size.x<0||isNaN(a[i].size.y)||a[i].size.y<0))return!1;return!0},AdtechAdVisibility.AdVisibilityUtils.transformSafeFrameGeometry=function(a,b){var c,d,e,f,g={winW:parseFloat(a.self.w),winH:parseFloat(a.self.h)},h=parseFloat(a.par.l),i=parseFloat(a.self.l);c=i-h,b&&(c=parseFloat(a.self.l));var j=parseFloat(a.par.t),k=parseFloat(a.self.t);return d=k-j,b&&(d=parseFloat(a.self.t)),g.x=c>0?0:c,g.y=d>0?0:d,e=parseFloat(a.par.r)-g.winW-i,f=parseFloat(a.par.b)-g.winH-k,b&&(e=parseFloat(a.win.w)-g.winW-c,f=parseFloat(a.win.h)-g.winH-d),g.rx=e>0?0:-1*e,g.ry=f>0?0:-1*f,g.w=g.winW+g.x-g.rx,g.h=g.winH+g.y-g.ry,g.w<0&&(g.w=0),g.h<0&&(g.h=0),g},AdtechAdVisibility.AdVisibilityUtils.getDomElementStyle=function(a){var b=a?a.document:window.top.document,c=b.defaultView,d=c&&c.getComputedStyle?function(a){return c.getComputedStyle(a,null)}:function(a){return a.currentStyle};return d},AdtechAdVisibility.AdVisibilityUtils.checkPercentMarginSupport=function(){var a,b=document.getElementsByTagName("body")[0],c=document.createElement("div"),d=b||document.createElement("body");c.style.marginTop="1%",d.appendChild(c);var e=AdtechAdVisibility.AdVisibilityUtils.getDomElementStyle(window),f=e(c);return f&&(a="1%"!==f.marginTop),d.removeChild(c),a},AdtechAdVisibility.AdVisibilityUtils.supportsPercentMargin=AdtechAdVisibility.AdVisibilityUtils.checkPercentMarginSupport(),AdtechAdVisibility.AdVisibilityUtils.hackPercentMargin=function(a,b,c){if(c.indexOf("%")===-1)return c;var d,e=a.style,f=e.width;return e.width=c,d=b.width,e.width=f,d},AdtechAdVisibility.AdVisibilityUtils.getWH=function(a,b,c,d){var e,f,g="height"!==b,h=g?a.offsetWidth:a.offsetHeight,i=g?"Left":"Top",j=g?"Right":"Bottom",k=AdtechAdVisibility.AdVisibilityUtils.getDomElementStyle(d),l=k(a),m=parseFloat(l["padding"+i])||0,n=parseFloat(l["padding"+j])||0,o=parseFloat(l["border"+i+"Width"])||0,p=parseFloat(l["border"+j+"Width"])||0,q=l["margin"+i],r=l["margin"+j];return void 0===AdtechAdVisibility.AdVisibilityUtils.supportsPercentMargin&&(AdtechAdVisibility.AdVisibilityUtils.supportsPercentMargin=AdtechAdVisibility.AdVisibilityUtils.checkPercentMarginSupport()),AdtechAdVisibility.AdVisibilityUtils.supportsPercentMargin||(q=AdtechAdVisibility.AdVisibilityUtils.hackPercentMargin(a,l,q),r=AdtechAdVisibility.AdVisibilityUtils.hackPercentMargin(a,l,r)),e=parseFloat(q)||0,f=parseFloat(r)||0,h>0?c?h+=e+f:h-=m+n+o+p:(h=l[b],(0>h||null===h)&&(h=a.style[b]||0),h=parseFloat(h)||0,c&&(h+=m+n+e+f+o+p)),h},AdtechAdVisibility.AdVisibilityUtils.isIFrameElement=function(a){return a.tagName&&"IFRAME"===a.tagName.toUpperCase()?!0:!1},AdtechAdVisibility.AdVisibilityUtils.isScrollableElement=function(a,b){var c=AdtechAdVisibility.AdVisibilityUtils.getDomElementStyle(b),d=c(a),e=d.overflow,f=d.overflowX,g=d.overflowY;return"auto"===e||"scroll"===e||"auto"===f||"scroll"===f||"auto"===g||"scroll"===g?!0:!1},AdtechAdVisibility.AdVisibilityUtils.getDomElementsBorders=function(a,b){var c={top:0,right:0,bottom:0,left:0},d=AdtechAdVisibility.AdVisibilityUtils.getDomElementStyle(b),e=d(a),f=parseInt(e.borderLeftWidth,10),g=parseInt(e.borderTopWidth,10),h=parseInt(e.borderRightWidth,10),i=parseInt(e.borderBottomWidth,10);return isNaN(g)||(c.top=g),isNaN(h)||(c.right=h),isNaN(i)||(c.bottom=i),isNaN(f)||(c.left=f),c},AdtechAdVisibility.AdVisibilityUtils.getScrollBarsSize=function(a,b){var c=AdtechAdVisibility.AdVisibilityUtils.getDomElementsBorders(a,b),d={horizontalBarThickness:0,verticalBarThickness:0};if(AdtechAdVisibility.AdVisibilityUtils.isIFrameElement(a)){var e={width:AdtechAdVisibility.AdVisibilityUtils.getWH(a,"width",!1,b),height:AdtechAdVisibility.AdVisibilityUtils.getWH(a,"height",!1,b)},f=AdtechAdVisibility.Utils.getViewportDims(a.contentWindow);d.horizontalBarThickness=e.height-f.h,d.verticalBarThickness=e.width-f.w}else d.verticalBarThickness=a.offsetWidth-a.clientWidth-c.left-c.right,d.horizontalBarThickness=a.offsetHeight-a.clientHeight-c.top-c.bottom;return d},AdtechAdVisibility.AdVisibilityUtils.getDomElementSize=function(a,b){var c={width:AdtechAdVisibility.AdVisibilityUtils.getWH(a,"width",!1,b),height:AdtechAdVisibility.AdVisibilityUtils.getWH(a,"height",!1,b)},d=AdtechAdVisibility.AdVisibilityUtils.getScrollBarsSize(a,b);return c.width-=d.verticalBarThickness,c.height-=d.horizontalBarThickness,c},AdtechAdVisibility.AdVisibilityUtils.Rectangle=function(a,b){this.top=a.top,this.left=a.left,this.width=b.width,this.height=b.height},AdtechAdVisibility.AdVisibilityUtils.Rectangle.prototype.getBottomPosition=function(){return this.top+this.height},AdtechAdVisibility.AdVisibilityUtils.Rectangle.prototype.getRightPosition=function(){return this.left+this.width},AdtechAdVisibility.AdVisibilityUtils.Rectangle.prototype.intersectWith=function(a){var b=Math.max(this.top,a.top),c=Math.max(this.left,a.left),d=Math.min(this.getBottomPosition(),a.getBottomPosition()),e=Math.min(this.getRightPosition(),a.getRightPosition()),f=e-c>0?e-c:0,g=d-b>0?d-b:0;return new AdtechAdVisibility.AdVisibilityUtils.Rectangle({top:b,left:c},{width:f,height:g})},AdtechAdVisibility.AdVisibilityUtils.Rectangle.prototype.calculateArea=function(){return this.width*this.height},AdtechAdVisibility.AdVisibilityUtils.Rectangle.prototype.isEmpty=function(){return 0===this.width||0===this.height},AdtechAdVisibility.AdVisibilityUtils.Translation=function(a,b){this.left=a,this.top=b},AdtechAdVisibility.AdVisibilityUtils.Translation.prototype.add=function(a){return new AdtechAdVisibility.AdVisibilityUtils.Translation(this.left+a.left,this.top+a.top)},AdtechAdVisibility.AdVisibilityUtils.Translation.prototype.translate=function(a){var b=a.left+this.left,c=a.top+this.top;return{left:b,top:c}},AdtechAdVisibility.AdVisibilityUtils.AdvisBox=function(a,b,c){this.translation=b,this.domElement=a,this.win=c},AdtechAdVisibility.AdVisibilityUtils.AdvisBox.prototype.computeRectangle=function(){var a=AdtechAdVisibility.AdVisibilityUtils.getDomElementsBorders(this.domElement,this.win),b=AdtechAdVisibility.AdVisibilityUtils.getDomElementSize(this.domElement,this.win),c=this.domElement.getBoundingClientRect(),d=this.translation.translate({left:c.left+a.left,top:c.top+a.top});return new AdtechAdVisibility.AdVisibilityUtils.Rectangle(d,b)},AdtechAdVisibility.BeaconMeasurementStrategy=function(a,b){this.bannerWindow=a.bannerWindow,this.bannerConfig=a,this.renderingInFiF=a.renderingInFiF,this.beaconDiv=this.bannerWindow.document.getElementById(this.bannerConfig.bannerDivContainerId),this.globalEventBus=b,this.eventClass=AdtechAdVisibility.AdVisibilityEvent,this.geometry=null,this.absLeft=0,this.absTop=0,this.windowContext=window,this.extractBeaconFromFiF(),this.buildGeometry()},AdtechAdVisibility.BeaconMeasurementStrategy.prototype.extractBeaconFromFiF=function(){switch(this.renderingInFiF&&(this.containingIFrame=AdtechAdVisibility.AdVisibilityUtils.getTargetParentIframeEle(window.top,this.bannerWindow),this.containingIFrame.parentNode.insertBefore(this.beaconDiv,this.containingIFrame)),this.bannerConfig.beaconPosition){case"absolute":this.beaconDiv.style.position="absolute",this.beaconDiv.style.top=0,this.beaconDiv.style.left=0}},AdtechAdVisibility.BeaconMeasurementStrategy.prototype.buildGeometry=function(a){var b=!0,c=this.bannerConfig.geometry;a===!0&&(c=this.bannerConfig.altGeometry),b=AdtechAdVisibility.AdVisibilityUtils.isValidGeometryStructure(c),this.geometry=b?c:[{offset:{x:0,y:0},size:{x:this.bannerConfig.width,y:this.bannerConfig.height}}]},AdtechAdVisibility.BeaconMeasurementStrategy.prototype.calculateAbsolutePosition=function(){var a=AdtechAdVisibility.AdVisibilityUtils.calculateAbsolutePosition(this.beaconDiv);this.absLeft=a.x,this.absTop=a.y,this.bannerConfig.offset&&(this.absLeft+=this.bannerConfig.offset.x||0,this.absTop+=this.bannerConfig.offset.y||0)},AdtechAdVisibility.BeaconMeasurementStrategy.prototype.getMeasure=function(){var a,b,c,d,e,f=0,g=0;for(b=AdtechAdVisibility.AdVisibilityUtils.getPageOffsets(this.windowContext),c=AdtechAdVisibility.Utils.getViewportDims(this.windowContext),"undefined"!=typeof this.viewportSize&&this.adjustNonFIFGeometry(c,b),this.calculateAbsolutePosition(),a=0;a<this.geometry.length;a+=1)"undefined"!=typeof this.geometry[a]&&(g+=this.geometry[a].size.x*this.geometry[a].size.y,d=this.getClipSize(b.x,c.w,this.geometry[a].offset.x+this.absLeft,this.geometry[a].size.x),e=this.getClipSize(b.y,c.h,this.geometry[a].offset.y+this.absTop,this.geometry[a].size.y),f+=d*e);return{visibleArea:f,totalArea:g}},AdtechAdVisibility.BeaconMeasurementStrategy.prototype.getClipSize=function(a,b,c,d){var e,f,g;return e=Math.max(a,c),f=Math.min(a+b,c+d),g=f-e,0>g&&(g=0),g},AdtechAdVisibility.BeaconMeasurementStrategy.prototype.setViewportSize=function(a){this.viewportSize=a},AdtechAdVisibility.BeaconMeasurementStrategy.prototype.adjustNonFIFGeometry=function(a,b){var c=a.w,d=a.h,e=0,f=0,g=this.viewportSize.rx,h=this.viewportSize.ry;this.viewportSize.winW>0&&this.viewportSize.winW>c&&(f=this.viewportSize.winW-c,f>g?f-=g:f=0),this.viewportSize.winH>0&&this.viewportSize.winH>d&&(e=this.viewportSize.winH-d,e>h?e-=h:e=0),a.w=this.viewportSize.w-f,a.h=this.viewportSize.h-e,b.x-=this.viewportSize.x,b.y-=this.viewportSize.y},AdtechAdVisibility.ViewportIntersectMeasurementStrategy=function(a,b){this.bannerWindow=a.bannerWindow,this.bannerConfig=a,this.renderingInFiF=a.renderingInFiF,this.beaconDiv=this.bannerWindow.document.getElementById(this.bannerConfig.bannerDivContainerId),this.globalEventBus=b,this.eventClass=AdtechAdVisibility.AdVisibilityEvent,this.geometry=null,this.domHierarchy=this.bannerConfig.domHierarchy,this.buildGeometry()},AdtechAdVisibility.ViewportIntersectMeasurementStrategy.prototype.buildGeometry=function(a){var b=!0,c=this.bannerConfig.geometry;a===!0&&(c=this.bannerConfig.altGeometry),b=AdtechAdVisibility.AdVisibilityUtils.isValidGeometryStructure(c),this.geometry=b?c:[{offset:{x:this.bannerConfig.offset.x,y:this.bannerConfig.offset.y},size:{x:this.bannerConfig.width,y:this.bannerConfig.height}}]},AdtechAdVisibility.ViewportIntersectMeasurementStrategy.prototype.getMeasure=function(){var a,b=0,c=0,d=null;for(this.boxHierarchy=this.buildBoxHierarchy(),parentVisibleRect=this.computeBannerParentVisibleRectangle(),a=0;a<this.geometry.length;a+=1)if("undefined"!=typeof this.geometry[a]&&(c+=this.geometry[a].size.x*this.geometry[a].size.y,parentVisibleRect&&!parentVisibleRect.isEmpty())){var e=parentVisibleRect.intersectWith(this.createBannerGeometryRectangle(this.geometry[a]));e.isEmpty()||(b+=e.calculateArea(),d=e)}return{visibleArea:b,totalArea:c,viewRect:d}},AdtechAdVisibility.ViewportIntersectMeasurementStrategy.prototype.computeBannerParentVisibleRectangle=function(){for(var a,b=this.boxHierarchy.length-1;b>0;b--){var c=this.boxHierarchy[b].computeRectangle();if(a=a?c.intersectWith(a):c,a.isEmpty())return a}var d=AdtechAdVisibility.Utils.getViewportDims(this.domHierarchy[this.domHierarchy.length-1]),e=new AdtechAdVisibility.AdVisibilityUtils.Rectangle({top:0,left:0},{width:d.w,height:d.h});return a=a?a.intersectWith(e):e},AdtechAdVisibility.ViewportIntersectMeasurementStrategy.prototype.createBannerGeometryRectangle=function(a){var b=this.domHierarchy[0].getBoundingClientRect(),c=b.left+a.offset.x,d=b.top+a.offset.y;return new AdtechAdVisibility.AdVisibilityUtils.Rectangle(this.translation.translate({left:c,top:d}),{width:a.size.x,height:a.size.y})},AdtechAdVisibility.ViewportIntersectMeasurementStrategy.prototype.buildBoxHierarchy=function(){for(var a=[],b=this.domHierarchy[this.domHierarchy.length-1],c=new AdtechAdVisibility.AdVisibilityUtils.Translation(0,0),d=this.domHierarchy.length-1;d>0;d-=1)a[a.length]=new AdtechAdVisibility.AdVisibilityUtils.AdvisBox(this.domHierarchy[d],c,b),AdtechAdVisibility.AdVisibilityUtils.isIFrameElement(this.domHierarchy[d])&&(b=this.domHierarchy[d].contentWindow,c=c.add(this.domHierarchy[d].getBoundingClientRect())),this.translation=c;return a},AdtechAdVisibility.BannerTimingInfo=function(a,b,c){this.viewTimeThreshold=a,this.viewTime=0,this.eventSent=!1,this.eventToSend=b,this.viewTimerIsRunning=!1,this.viewIntervalId=0,this.checkAreaVisibilityTimerData={},this.maxViewAreaPercent=0,this.btiType=c},AdtechAdVisibility.AdVisibilityExpandManager=function(a){this.placementId=a.placementId,this.template=window.adtechAdVisBannerTemplateConfig[this.placementId],this.wrapper=document.getElementById("AdtechAdVisWrapper"+this.placementId),this.useAltGeometry=!1,this.trigger=a.trigger,this.init=function(){this.canAccessTop=!1;try{var a=window.top.document;a&&(this.canAccessTop=!0)}catch(b){}var c=!this.canAccessTop||"undefined"==typeof AdtechAdVisibility||"undefined"==typeof AdtechAdVisibility.AdVisibilityInitUtils;c||AdtechAdVisibility.AdVisibilityInitUtils.initIsIframeCheck()&&!AdtechAdVisibility.AdVisibilityInitUtils.initIsFriendlyIframeCheck()||this.trigger&&this.checkTriggerGeometry()&&this.addTriggerListener()},this.checkTriggerGeometry=function(){return this.trigger.geometry&&AdtechAdVisibility.AdVisibilityUtils.isValidGeometryStructure(this.trigger.geometry)?this.trigger.altGeometry&&!AdtechAdVisibility.AdVisibilityUtils.isValidGeometryStructure(this.trigger.altGeometry)?!1:!0:!1},this.addTriggerListener=function(){if("mouseover"===this.trigger.type||"mousedown"===this.trigger.type){var a=this.trigger.type;"mouseover"===this.trigger.type&&(a="mousemove"),this.addMouseListeners(a)}},this.addMouseListeners=function(a){this.addGeometryEventHandler(a,this.createCallback(this.mouseChangeCallback)),this.addGeometryEventHandler("mouseout",this.createCallback(this.mouseOutCallback))},this.addGeometryEventHandler=function(a,b){var c=this.wrapper;"function"==typeof c.addEventListener?c.addEventListener(a,b,!1):c.attachEvent("on"+a,b)},this.mouseChangeCallback=function(a){if(!this.useAltGeometry||this.trigger.oneTimeChange!==!0){var b=this.getMousePosition(a,this.wrapper),c=this.isMouseInTriggerArea(b);c&&!this.useAltGeometry?this.triggerBannerChange(!0):!c&&this.useAltGeometry&&this.triggerBannerChange(!1)}},this.mouseOutCallback=function(){this.trigger.changeOnMouseOut===!0&&this.triggerBannerChange(!1)},this.createCallback=function(a){var b=this,c=function(){a.apply(b,arguments)};return c},this.triggerBannerChange=function(a){this.useAltGeometry=a,this.canAccessTop&&window.top.adtechAdVisibilityManager&&window.top.adtechAdVisibilityManager.bannerChanged(this.placementId,{useAltGeometry:a})},this.triggerBannerClose=function(){this.canAccessTop&&window.top.adtechAdVisibilityManager&&window.top.adtechAdVisibilityManager.bannerChanged(this.placementId,{deactivateBanner:!0})},this.isMouseInTriggerArea=function(a){var b=null;b=this.useAltGeometry&&this.trigger.altGeometry?this.trigger.altGeometry:this.trigger.geometry;for(var c=0;c<b.length;c++){var d=b[c];if("undefined"!=typeof d&&a.x>=d.offset.x&&a.x<=d.offset.x+d.size.x&&a.y>=d.offset.y&&a.y<=d.offset.y+d.size.y)return!0}return!1},this.getMousePosition=function(a,b){var c,d,e=b.getBoundingClientRect(),f=document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop,g=document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft,h=e.left+g,i=e.top+f;return document.all?(c=event.clientX+g-h,d=event.clientY+f-i):(c=a.pageX-h,d=a.pageY-i),{x:c,y:d}},this.init()},AdtechAdVisibility.VISIBLE_IMPRESSION_TIME_MSEC=1e3,AdtechAdVisibility.AREA_TIMER_DURATION_MSEC=1e3,AdtechAdVisibility.DWELL_MIN_VIEWABLE_RATIO=.5,AdtechAdVisibility.AREA_VIEW_PERCENT_STEP=10,AdtechAdVisibility.VISIBILITY_TIMER_RESOLUTION_MSEC=1e3,AdtechAdVisibility.Banner=function(a,b){AdtechAdVisibility.Banner.supa.constructor.call(this),this.measurementStrategy,this.bannerConfig=a,this.renderingInFiF=this.bannerConfig.renderingInFiF,this.globalEventBus=b,this.eventClass=AdtechAdVisibility.AdVisibilityEvent,this.standardTimingInfo={},this.customTimingInfo={},this.visibleinViewport=!1,this.isCustomSettings=!1,this.customVisibleTimeMsec=AdtechAdVisibility.VISIBLE_IMPRESSION_TIME_MSEC,this.customVisibleRatio=AdtechAdVisibility.DWELL_MIN_VIEWABLE_RATIO,this.isMaxAreaMeasurementEnabled=!0,this.timersFlushed=!1,this.windowInFocus=this.globalEventBus.windowInFocus,this.init()},AdtechAdVisibility.Utils.extend(AdtechAdVisibility.Banner,AdtechAdVisibility.EventDispatcher),AdtechAdVisibility.Banner.prototype.init=function(){!isNaN(this.bannerConfig.customVisibleTimeMsec)&&this.bannerConfig.customVisibleTimeMsec>0&&(this.customVisibleTimeMsec=this.bannerConfig.customVisibleTimeMsec),!isNaN(this.bannerConfig.customVisiblePercentage)&&this.bannerConfig.customVisiblePercentage>0&&(this.customVisibleRatio=this.bannerConfig.customVisiblePercentage/100),this.isCustomSettings=this.customVisibleTimeMsec!==AdtechAdVisibility.VISIBLE_IMPRESSION_TIME_MSEC||!AdtechAdVisibility.AdVisibilityUtils.isComparable(this.customVisibleRatio,AdtechAdVisibility.DWELL_MIN_VIEWABLE_RATIO,1e-4),this.isMaxAreaMeasurementEnabled=!this.bannerConfig.isAdvisGoal||this.bannerConfig.isSelectedBySampling,this.bannerConfig.altGeometry&&this.initExpandManager(),this.initEnvironment(),this.initMeasurementStrategy(),this.addEventListeners(),this.setupBannerTimingInfo()},AdtechAdVisibility.Banner.prototype.initMeasurementStrategy=function(){this.measurementStrategy=this.bannerConfig.simpleModeMeasure?new AdtechAdVisibility.BeaconMeasurementStrategy(this.bannerConfig,this.globalEventBus):new AdtechAdVisibility.ViewportIntersectMeasurementStrategy(this.bannerConfig,this.globalEventBus)},AdtechAdVisibility.Banner.prototype.addEventListeners=function(){this.globalEventBus.addEventListener(this.eventClass.TIMERS_FLUSHED,this.timersFlushedHandler,this),this.globalEventBus.addEventListener(this.eventClass.BLUR,this.windowFocusEventHandler,this),this.globalEventBus.addEventListener(this.eventClass.FOCUS,this.windowFocusEventHandler,this),this.globalEventBus.addEventListener(this.eventClass.PAGE_RESIZE,this.resizeHandler,this),this.globalEventBus.addEventListener(this.eventClass.PAGE_SCROLL,this.scrollHandler,this),this.globalEventBus.addEventListener(this.eventClass.PAGE_LOAD,this.pageLoadHandler,this),this.globalEventBus.addEventListener(this.eventClass.BANNER_REGISTER,this.bannerRegisterHandler,this),this.globalEventBus.addEventListener(this.eventClass.NON_FIF_PARENT_VIEWPORT_UPDATE,this.nonFIFParentViewportSet,this),this.globalEventBus.addEventListener(this.eventClass.NON_FIF_PARENT_FOCUS,this.nonFIFParentFocusSet,this)},AdtechAdVisibility.Banner.prototype.removeEventListeners=function(){this.globalEventBus.removeEventListener(this.eventClass.TIMERS_FLUSHED,this.timersFlushedHandler,this),this.globalEventBus.removeEventListener(this.eventClass.BLUR,this.windowFocusEventHandler,this),this.globalEventBus.removeEventListener(this.eventClass.FOCUS,this.windowFocusEventHandler,this),this.globalEventBus.removeEventListener(this.eventClass.PAGE_RESIZE,this.resizeHandler,this),this.globalEventBus.removeEventListener(this.eventClass.PAGE_SCROLL,this.scrollHandler,this),this.globalEventBus.removeEventListener(this.eventClass.PAGE_LOAD,this.pageLoadHandler,this),this.globalEventBus.removeEventListener(this.eventClass.BANNER_REGISTER,this.bannerRegisterHandler,this),this.globalEventBus.removeEventListener(this.eventClass.NON_FIF_PARENT_VIEWPORT_UPDATE,this.nonFIFParentViewportSet,this),this.globalEventBus.removeEventListener(this.eventClass.NON_FIF_PARENT_FOCUS,this.nonFIFParentFocusSet,this),this.removeHierarchyNativeEventListeners()},AdtechAdVisibility.Banner.prototype.setupBannerTimingInfo=function(){var a,b,c;for(b=new AdtechAdVisibility.AdVisibilityEvent(this.eventClass.VISIBLE_IMPRESSION),c=new AdtechAdVisibility.AdVisibilityEvent(this.eventClass.CUSTOM_VISIBLE_IMPRESSION),b.property("bannerConfig",this.bannerConfig),c.property("bannerConfig",this.bannerConfig),this.standardTimingInfo=new AdtechAdVisibility.BannerTimingInfo(AdtechAdVisibility.VISIBLE_IMPRESSION_TIME_MSEC,b,"standard"),this.customTimingInfo=new AdtechAdVisibility.BannerTimingInfo(this.customVisibleTimeMsec,c,"custom"),a=0;100>=a;a+=AdtechAdVisibility.AREA_VIEW_PERCENT_STEP)this.standardTimingInfo.checkAreaVisibilityTimerData[a]={},this.standardTimingInfo.checkAreaVisibilityTimerData[a].isRunning=!1,this.standardTimingInfo.checkAreaVisibilityTimerData[a].intervalId=0,this.customTimingInfo.checkAreaVisibilityTimerData[a]={},this.customTimingInfo.checkAreaVisibilityTimerData[a].isRunning=!1,this.customTimingInfo.checkAreaVisibilityTimerData[a].timerId=0},AdtechAdVisibility.Banner.prototype.initExpandManager=function(){var a={};this.bannerConfig.expandManagerConfig&&(a=this.bannerConfig.expandManagerConfig),a.placementId=this.bannerConfig.placementId,this.bannerConfig.bannerWindow["expandManager"+this.bannerConfig.placementId]=new AdtechAdVisibility.AdVisibilityExpandManager(a)},AdtechAdVisibility.Banner.prototype.initEnvironment=function(){this.bannerConfig.simpleModeMeasure?this.bannerConfig.simpleModeMeasure&&this.bannerConfig.renderingInFiF&&(this.createFocusBlurHierarchyHandler(0),this.addFocusBlurHierarchyHandlers(this.bannerConfig.bannerWindow,0)):(this.bannerConfig.domHierarchy=this.buildBannerDomHierarchy(this.bannerConfig.bannerWindow.document.getElementById(this.bannerConfig.bannerDivContainerId),this.bannerConfig.bannerWindow),this.addHierarchyNativeEventListeners())},AdtechAdVisibility.Banner.prototype.checkVisible=function(){var a,b,c;(!this.bannerConfig.renderingInNonFiF||this.bannerConfig.isParentEnviromentSet)&&(a=this.measurementStrategy.getMeasure(),b=a.visibleArea/a.totalArea,c=Math.round(100*b),this.currentViewAreaPercent=Math.ceil(c/AdtechAdVisibility.AREA_VIEW_PERCENT_STEP)*AdtechAdVisibility.AREA_VIEW_PERCENT_STEP,this.visibleinViewport=b>=AdtechAdVisibility.DWELL_MIN_VIEWABLE_RATIO,this.visibleinViewport&&this.isInFocusWindow()?this.startViewTimer(this.standardTimingInfo):this.stopViewTimer(this.standardTimingInfo),this.isMaxAreaMeasurementEnabled&&(this.currentViewAreaPercent>this.standardTimingInfo.maxViewAreaPercent&&this.isInFocusWindow()?this.startAreaViewTimer(this.currentViewAreaPercent,this.standardTimingInfo,AdtechAdVisibility.AREA_TIMER_DURATION_MSEC):this.stopAreaViewTimer(this.currentViewAreaPercent,this.standardTimingInfo)),this.isCustomSettings&&(b>=this.customVisibleRatio&&this.isInFocusWindow()?this.startViewTimer(this.customTimingInfo):this.stopViewTimer(this.customTimingInfo),this.isMaxAreaMeasurementEnabled&&(this.currentViewAreaPercent>this.customTimingInfo.maxViewAreaPercent&&this.isInFocusWindow()?this.startAreaViewTimer(this.currentViewAreaPercent,this.customTimingInfo,this.customVisibleTimeMsec):this.stopAreaViewTimer(this.currentViewAreaPercent,this.customTimingInfo))))},AdtechAdVisibility.Banner.prototype.isInFocusWindow=function(){return this.windowInFocus||this.parentWindowInFocus},AdtechAdVisibility.Banner.prototype.startViewTimer=function(a){a.viewTimerIsRunning||this.timersFlushed||(a.viewIntervalId=setInterval(AdtechAdVisibility.Utils.createClosure(this,this.viewTimerHandler,a),AdtechAdVisibility.VISIBILITY_TIMER_RESOLUTION_MSEC),a.viewTimerIsRunning=!0)},AdtechAdVisibility.Banner.prototype.viewTimerHandler=function(a){a.viewTimerIsRunning&&(a.viewTime=a.viewTime+AdtechAdVisibility.VISIBILITY_TIMER_RESOLUTION_MSEC,a.viewTime>=a.viewTimeThreshold&&!a.eventSent&&(this.dispatchEvent(a.eventToSend),a.eventSent=!0,this.visibleEventFired=!0))},AdtechAdVisibility.Banner.prototype.stopViewTimer=function(a){a.viewTimerIsRunning&&(clearInterval(a.viewIntervalId),a.viewTimerIsRunning=!1)},AdtechAdVisibility.Banner.prototype.startAreaViewTimer=function(a,b,c){b.checkAreaVisibilityTimerData[a].isRunning===!0||this.timersFlushed||(b.checkAreaVisibilityTimerData[a].isRunning=!0,b.checkAreaVisibilityTimerData[a].timerId=setTimeout(AdtechAdVisibility.Utils.createClosure(this,this.checkViewPercentage,a,b),c))},AdtechAdVisibility.Banner.prototype.checkViewPercentage=function(a,b){this.stopAreaViewTimer(a,b),this.currentViewAreaPercent>b.maxViewAreaPercent&&this.isInFocusWindow()&&(b.maxViewAreaPercent=Math.min(a,this.currentViewAreaPercent))},AdtechAdVisibility.Banner.prototype.stopAreaViewTimer=function(a,b){b.checkAreaVisibilityTimerData[a].isRunning&&(clearTimeout(b.checkAreaVisibilityTimerData[a].timerId),b.checkAreaVisibilityTimerData[a].isRunning=!1,b.checkAreaVisibilityTimerData[a].timerId=0)},AdtechAdVisibility.Banner.prototype.containerViewHandler=function(){this.checkVisible()},AdtechAdVisibility.Banner.prototype.windowFocusEventHandler=function(a){this.windowInFocus=a.target.windowInFocus,this.checkVisible()},AdtechAdVisibility.Banner.prototype.resizeHandler=function(){this.checkVisible()
},AdtechAdVisibility.Banner.prototype.pageLoadHandler=function(){this.checkVisible()},AdtechAdVisibility.Banner.prototype.scrollHandler=function(){this.checkVisible()},AdtechAdVisibility.Banner.prototype.bannerRegisterHandler=function(){this.checkVisible()},AdtechAdVisibility.Banner.prototype.nonFIFParentViewportSet=function(a){"undefined"!=typeof a.target.eventData.w&&(this.bannerConfig.isParentEnviromentSet=!0,"undefined"!=typeof a.target.eventData.parentWindowInFocus&&(this.parentWindowInFocus=a.target.eventData.parentWindowInFocus),this.measurementStrategy.setViewportSize(a.target.eventData),this.checkVisible())},AdtechAdVisibility.Banner.prototype.nonFIFParentFocusSet=function(a){this.parentWindowInFocus=a.target.parentWindowInFocus,this.checkVisible()},AdtechAdVisibility.Banner.prototype.timersFlushedHandler=function(){this.stopViewTimer(this.standardTimingInfo),this.isCustomSettings&&this.stopViewTimer(this.customTimingInfo),this.timersFlushed=!0,this.removeEventListeners()},AdtechAdVisibility.Banner.prototype.getMaxViewAreaPercent=function(){return this.standardTimingInfo.maxViewAreaPercent},AdtechAdVisibility.Banner.prototype.getCustomMaxViewAreaPercent=function(){return this.customTimingInfo.maxViewAreaPercent},AdtechAdVisibility.Banner.prototype.getViewTimeMsec=function(){return this.standardTimingInfo.viewTime},AdtechAdVisibility.Banner.prototype.getCustomViewTimeMsec=function(){return this.customTimingInfo.viewTime},AdtechAdVisibility.Banner.prototype.getBannerConfig=function(){return this.bannerConfig},AdtechAdVisibility.Banner.prototype.isCustomVisibleImpressions=function(){return this.isCustomSettings},AdtechAdVisibility.Banner.prototype.isViewEvents=function(){return this.bannerConfig.isAdvisGoal},AdtechAdVisibility.Banner.prototype.geometryChanged=function(a){this.measurementStrategy.buildGeometry(a),this.checkVisible()},AdtechAdVisibility.Banner.prototype.buildBannerDomHierarchy=function(a,b){var c=[],d=b;for(this.buildDocumentClipHierarchy(a,c);d!=window.top&&AdtechAdVisibility.AdVisibilityUtils.isInFriendlyIframe(d,!1);){var e=AdtechAdVisibility.AdVisibilityUtils.getTargetParentIframeEle(d.parent,d);d=d.parent,this.buildDocumentClipHierarchy(e,c)}return c[c.length]=d,c},AdtechAdVisibility.Banner.prototype.buildDocumentClipHierarchy=function(a,b){for(;"BODY"!==a.tagName.toUpperCase();)b[b.length]=a,a=a.parentNode},AdtechAdVisibility.Banner.prototype.addHierarchyNativeEventListeners=function(){if(this.bannerConfig.domHierarchy){this.hierarchyHandlers=[];for(var a=this.bannerConfig.domHierarchy.length-2;a>0;a--){var b=this.bannerConfig.domHierarchy[a],c=!1;this.hierarchyHandlers[a]={},AdtechAdVisibility.AdVisibilityUtils.isIFrameElement(b)?(b=b.contentWindow,c=!0,this.createFocusBlurHierarchyHandler(a),this.addFocusBlurHierarchyHandlers(b,a)):c=AdtechAdVisibility.AdVisibilityUtils.isScrollableElement(b,this.bannerConfig.bannerWindow),c&&(this.hierarchyHandlers[a].scroll=AdtechAdVisibility.Utils.createClosure(this,this.scrollHandler),AdtechAdVisibility.Utils.registerNativeEventHandler(b,"scroll",this.hierarchyHandlers[a].scroll))}}},AdtechAdVisibility.Banner.prototype.createFocusBlurHierarchyHandler=function(a){this.hierarchyHandlers||(this.hierarchyHandlers=[]),this.hierarchyHandlers[a]||(this.hierarchyHandlers[a]={}),this.hierarchyHandlers[a].focus=AdtechAdVisibility.Utils.createClosure(this,this.windowFocusEventHandler,{target:{windowInFocus:!0}}),this.hierarchyHandlers[a].blur=AdtechAdVisibility.Utils.createClosure(this,this.windowFocusEventHandler,{target:{windowInFocus:!1}})},AdtechAdVisibility.Banner.prototype.addFocusBlurHierarchyHandlers=function(a,b){AdtechAdVisibility.Utils.registerNativeEventHandler(a,"focus",this.hierarchyHandlers[b].focus),AdtechAdVisibility.Utils.registerNativeEventHandler(a,"blur",this.hierarchyHandlers[b].blur)},AdtechAdVisibility.Banner.prototype.removeFocusBlurHierarchyHandlers=function(a,b){this.hierarchyHandlers&&this.hierarchyHandlers[b]&&(AdtechAdVisibility.Utils.deregisterNativeEventHandler(a,"focus",this.hierarchyHandlers[b].focus),AdtechAdVisibility.Utils.deregisterNativeEventHandler(a,"blur",this.hierarchyHandlers[b].blur))},AdtechAdVisibility.Banner.prototype.removeHierarchyNativeEventListeners=function(){if(!this.bannerConfig.simpleModeMeasure&&this.bannerConfig.domHierarchy)for(var a=this.bannerConfig.domHierarchy.length-2;a>0;a--){var b=this.bannerConfig.domHierarchy[a],c=!1;AdtechAdVisibility.AdVisibilityUtils.isIFrameElement(b)?(b=b.contentWindow,c=!0,this.removeFocusBlurHierarchyHandlers(b,a)):c=AdtechAdVisibility.AdVisibilityUtils.isScrollableElement(b,this.bannerConfig.bannerWindow),c&&AdtechAdVisibility.Utils.deregisterNativeEventHandler(b,"scroll",this.hierarchyHandlers[a].scroll)}else this.bannerConfig.simpleModeMeasure&&this.bannerConfig.renderingInFiF&&this.removeFocusBlurHierarchyHandlers(this.bannerConfig.bannerWindow,0);this.hierarchyHandlers=null},AdtechAdVisibility.RichMediaEventType=function(){},AdtechAdVisibility.RichMediaEventType.VIEWTIME="999",AdtechAdVisibility.RichMediaEventType.TOTALTIME="998",AdtechAdVisibility.RichMediaEventType.VISIBLE_IMP="997",AdtechAdVisibility.RichMediaEventType.CUSTOM_VISIBLE_IMP="995",AdtechAdVisibility.RichMediaEventType.CUSTOM_VIEWTIME="994",AdtechAdVisibility.RichMediaEventType.INDETERMINABLE_IFRAME_NON_FRIENDLY="979",AdtechAdVisibility.RichMediaEventType.INDETERMINABLE_IFRAME_NESTED="978",AdtechAdVisibility.RichMediaEventType.NON_FRIENDLY_IFRAME_PARENT_DOM_TIMEDOUT="977",AdtechAdVisibility.RichMediaEventType.INDETERMINABLE_SIZE_NOT_SET="969",AdtechAdVisibility.RichMediaEventType.AREA_PERCENT_0="949",AdtechAdVisibility.RichMediaEventType.AREA_PERCENT_10="950",AdtechAdVisibility.RichMediaEventType.AREA_PERCENT_20="951",AdtechAdVisibility.RichMediaEventType.AREA_PERCENT_30="952",AdtechAdVisibility.RichMediaEventType.AREA_PERCENT_40="953",AdtechAdVisibility.RichMediaEventType.AREA_PERCENT_50="954",AdtechAdVisibility.RichMediaEventType.AREA_PERCENT_60="955",AdtechAdVisibility.RichMediaEventType.AREA_PERCENT_70="956",AdtechAdVisibility.RichMediaEventType.AREA_PERCENT_80="957",AdtechAdVisibility.RichMediaEventType.AREA_PERCENT_90="958",AdtechAdVisibility.RichMediaEventType.AREA_PERCENT_100="959",AdtechAdVisibility.RichMediaEventType.CUSTOM_AREA_PERCENT_0="929",AdtechAdVisibility.RichMediaEventType.CUSTOM_AREA_PERCENT_10="930",AdtechAdVisibility.RichMediaEventType.CUSTOM_AREA_PERCENT_20="931",AdtechAdVisibility.RichMediaEventType.CUSTOM_AREA_PERCENT_30="932",AdtechAdVisibility.RichMediaEventType.CUSTOM_AREA_PERCENT_40="933",AdtechAdVisibility.RichMediaEventType.CUSTOM_AREA_PERCENT_50="934",AdtechAdVisibility.RichMediaEventType.CUSTOM_AREA_PERCENT_60="935",AdtechAdVisibility.RichMediaEventType.CUSTOM_AREA_PERCENT_70="936",AdtechAdVisibility.RichMediaEventType.CUSTOM_AREA_PERCENT_80="937",AdtechAdVisibility.RichMediaEventType.CUSTOM_AREA_PERCENT_90="938",AdtechAdVisibility.RichMediaEventType.CUSTOM_AREA_PERCENT_100="939",AdtechAdVisibility.RichMediaEventType.getAreaPercentId=function(a,b){if(b===!0)switch(a){case 0:return this.CUSTOM_AREA_PERCENT_0;case 10:return this.CUSTOM_AREA_PERCENT_10;case 20:return this.CUSTOM_AREA_PERCENT_20;case 30:return this.CUSTOM_AREA_PERCENT_30;case 40:return this.CUSTOM_AREA_PERCENT_40;case 50:return this.CUSTOM_AREA_PERCENT_50;case 60:return this.CUSTOM_AREA_PERCENT_60;case 70:return this.CUSTOM_AREA_PERCENT_70;case 80:return this.CUSTOM_AREA_PERCENT_80;case 90:return this.CUSTOM_AREA_PERCENT_90;case 100:return this.CUSTOM_AREA_PERCENT_100;default:return this.CUSTOM_AREA_PERCENT_0}switch(a){case 0:return this.AREA_PERCENT_0;case 10:return this.AREA_PERCENT_10;case 20:return this.AREA_PERCENT_20;case 30:return this.AREA_PERCENT_30;case 40:return this.AREA_PERCENT_40;case 50:return this.AREA_PERCENT_50;case 60:return this.AREA_PERCENT_60;case 70:return this.AREA_PERCENT_70;case 80:return this.AREA_PERCENT_80;case 90:return this.AREA_PERCENT_90;case 100:return this.AREA_PERCENT_100;default:return this.AREA_PERCENT_0}},AdtechAdVisibility.AdVisibilityManager=function(){this.flushTimerTimeout=0,this.elapsedTimeToFlush=0,this.flushTimerIsRunning=!1,this.timersFlushed=!1,this.banners={},this.trackings={},this.trackings_2={},this.trackings_view_events={},this.pageTimerIntervalId=0,this.pageTime=0,this.pageTimerIsRunning=!1,this.timersFlushed=!1,this.windowInFocus=!0,this.eventHandlersAdded=!1,this.useSafeFrameCallback=!1,this.globalEventBus=new AdtechAdVisibility.EventDispatcher,this.init()},AdtechAdVisibility.AdVisibilityManager.TIME_TO_FLUSH=3e5,AdtechAdVisibility.AdVisibilityManager.DEFAULT_EVENT_VALUE=1,AdtechAdVisibility.AdVisibilityManager.NON_FIF_REGISTRATION_TRIES=20,AdtechAdVisibility.AdVisibilityManager.NON_FIF_REGISTRATION_TRY_INTERVAL=300,AdtechAdVisibility.AdVisibilityManager.SAFE_FRAME_GEOMETRY_RETRIEVAL_INTERVAL=300,AdtechAdVisibility.AdVisibilityManager.prototype.init=function(){this.startPageTimer(),this.startFlushTimer(),this.globalEventBus.addEventListener(AdtechAdVisibility.AdVisibilityEvent.ERROR,this.errorHandler,this)},AdtechAdVisibility.AdVisibilityManager.prototype.registerBanner=function(a){var b=a.bannerWindow;this.logBannerConfiguration(a),this.addTracking(a),this.isIndeterminableImpression(a)||(this.checkBannerEnvironment(a),a.renderingInNonFiF&&!a.renderingInSafeFrame&&this.registerNonFIFBanner(a,!0),a.renderingInSafeFrame&&this.registerSafeFrameBanner(a),this.logBannerEnvironment(a),this.addNativeEventHandlers(a.renderingInNonFiF?b:null),a.renderingInFiF&&"complete"!=b.document.readyState?AdtechAdVisibility.Utils.registerNativeEventHandler(b,"load",AdtechAdVisibility.Utils.createClosure(this,this.iFrameOnLoadHandler,a)):(this.initBanner(a),setTimeout(AdtechAdVisibility.Utils.createClosure(this,this.registrationCompleteHandler,a.placementId),200)))},AdtechAdVisibility.AdVisibilityManager.prototype.logBannerConfiguration=function(){},AdtechAdVisibility.AdVisibilityManager.prototype.checkBannerEnvironment=function(a){a.renderingInFiF=AdtechAdVisibility.AdVisibilityUtils.isInIframe(a)&&AdtechAdVisibility.AdVisibilityUtils.isInFriendlyIframe(a.bannerWindow,a.simpleModeMeasure,a.width,a.height),a.renderingInNonFiF=AdtechAdVisibility.AdVisibilityUtils.isInIframe(a)&&!AdtechAdVisibility.AdVisibilityUtils.isInFriendlyIframe(a.bannerWindow,a.simpleModeMeasure,a.width,a.height),a.renderingInSafeFrame=null!=window.sfAPI||"undefined"!=typeof $sf&&null!=$sf.ext},AdtechAdVisibility.AdVisibilityManager.prototype.logBannerEnvironment=function(){},AdtechAdVisibility.AdVisibilityManager.prototype.registerNonFIFBanner=function(a,b){if(b===!0)this.nonFIFrameEnvironment=!0,this.nonFIFrameRegistrationDone=!1,this.nonFIFrameRegistrationTryCount=0,a.simpleModeMeasure=!0;else if(this.nonFIFrameRegistrationDone)return;if(this.nonFIFrameRegistrationTryCount++,this.nonFIFrameRegistrationTryCount>=AdtechAdVisibility.AdVisibilityManager.NON_FIF_REGISTRATION_TRIES)return void this.stopMeasurementActivity(!0);try{window.top.postMessage(window.AdtechAdVisibilityTools.NonFIFrameMessage.encodeMessage(window.AdtechAdVisibilityTools.NonFIFrameMessage.REGISTER_EVENT,a.placementId),"*")}catch(c){}setTimeout(AdtechAdVisibility.Utils.createClosure(this,this.registerNonFIFBanner,a),AdtechAdVisibility.AdVisibilityManager.NON_FIF_REGISTRATION_TRY_INTERVAL)},AdtechAdVisibility.AdVisibilityManager.prototype.registerSafeFrameBanner=function(a){if(this.checkBrowserSafeFrameStatus(),a.simpleModeMeasure=!0,this.nonFIFrameEnvironment=!0,this.nonFIFrameRegistrationDone=!0,this.useSafeFrameCallback){var b=window.sfAPI||$sf.ext,c=AdtechAdVisibility.Utils.createClosure(this,this.safeFrameStatusUpdate,"geom-update");if(b)try{b.register(a.width,a.height,AdtechAdVisibility.Utils.createClosure(this,this.safeFrameStatusUpdate)),"complete"!=a.bannerWindow.document.readyState?AdtechAdVisibility.Utils.registerNativeEventHandler(a.bannerWindow,"load",c):this.globalEventBus.addEventListener(AdtechAdVisibility.AdVisibilityEvent.BANNER_REGISTER,c)}catch(d){}}else this.startSafeFrameTimer()},AdtechAdVisibility.AdVisibilityManager.prototype.checkBrowserSafeFrameStatus=function(){var a=navigator.userAgent.toLowerCase(),b=a.indexOf("chrome");if(this.adjustSafeFrameGeometry=!1,b!=-1)try{var c=parseInt(a.substring(b+7));33>c&&(this.adjustSafeFrameGeometry=!0)}catch(d){}},AdtechAdVisibility.AdVisibilityManager.prototype.isIndeterminableImpression=function(a){return isNaN(a.width)||isNaN(a.height)||0==a.width||0==a.height?(this.sendIndeterminableImpression(a,AdtechAdVisibility.RichMediaEventType.INDETERMINABLE_SIZE_NOT_SET),!0):a.simpleModeMeasure&&AdtechAdVisibility.AdVisibilityUtils.isInNestedIframe(a)?(this.sendIndeterminableImpression(a,AdtechAdVisibility.RichMediaEventType.INDETERMINABLE_IFRAME_NESTED),!0):!1},AdtechAdVisibility.AdVisibilityManager.prototype.initBanner=function(a){var b=new AdtechAdVisibility.Banner(a,this.globalEventBus);b.addEventListener(AdtechAdVisibility.AdVisibilityEvent.VISIBLE_IMPRESSION,this.visibleImpressionHandler,this),b.addEventListener(AdtechAdVisibility.AdVisibilityEvent.CUSTOM_VISIBLE_IMPRESSION,this.customVisibleImpressionHandler,this),this.banners[a.placementId]=b},AdtechAdVisibility.AdVisibilityManager.prototype.initBannerDelayed=function(a){window.top.adtechAdVisibilityManager.initBanner(a),setTimeout(AdtechAdVisibility.Utils.createClosure(this,this.registrationCompleteHandler,a.placementId),200)},AdtechAdVisibility.AdVisibilityManager.prototype.addTracking=function(a){this.trackings[a.placementId]=this.createTrackingPixel(),this.trackings["custom"+a.placementId]=this.createTrackingPixel(),this.trackings_2[a.placementId]=this.createTrackingPixel(),this.trackings_2["custom"+a.placementId]=this.createTrackingPixel(),a.isAdvisGoal&&(this.trackings_view_events[a.placementId]=this.createTrackingPixel())},AdtechAdVisibility.AdVisibilityManager.prototype.createTrackingPixel=function(){var a=new Image;return a},AdtechAdVisibility.AdVisibilityManager.prototype.addNativeEventHandlers=function(a){if(!this.eventHandlersAdded){this.eventHandlersAdded=!0;var b=a?a:window.top;AdtechAdVisibility.Utils.registerNativeEventHandler(b,"scroll",AdtechAdVisibility.Utils.createClosure(this,this.scrollHandler)),AdtechAdVisibility.Utils.registerNativeEventHandler(b,"resize",AdtechAdVisibility.Utils.createClosure(this,this.resizeHandler)),AdtechAdVisibility.Utils.registerNativeEventHandler(b,"load",AdtechAdVisibility.Utils.createClosure(this,this.onLoadHandler)),AdtechAdVisibility.Utils.registerNativeEventHandler(b,"focus",AdtechAdVisibility.Utils.createClosure(this,this.onFocusHandler)),AdtechAdVisibility.Utils.registerNativeEventHandler(b,"blur",AdtechAdVisibility.Utils.createClosure(this,this.onBlurHandler)),AdtechAdVisibility.Utils.registerNativeEventHandler(b,"message",AdtechAdVisibility.Utils.createClosure(this,this.onMessageHandler)),AdtechAdVisibility.Utils.registerNativeEventHandler(b.self,"beforeunload",AdtechAdVisibility.Utils.createClosure(this,this.stopMeasurementActivity)),b.document.hasFocus&&!b.document.hasFocus()?this.onBlurHandler():this.onFocusHandler()}},AdtechAdVisibility.AdVisibilityManager.prototype.removeNativeEventHandlers=function(a){var b=a?a:window.top;AdtechAdVisibility.Utils.deregisterNativeEventHandler(b,"scroll",AdtechAdVisibility.Utils.createClosure(this,this.scrollHandler)),AdtechAdVisibility.Utils.deregisterNativeEventHandler(b,"resize",AdtechAdVisibility.Utils.createClosure(this,this.resizeHandler)),AdtechAdVisibility.Utils.deregisterNativeEventHandler(b,"load",AdtechAdVisibility.Utils.createClosure(this,this.onLoadHandler)),AdtechAdVisibility.Utils.deregisterNativeEventHandler(b,"focus",AdtechAdVisibility.Utils.createClosure(this,this.onFocusHandler)),AdtechAdVisibility.Utils.deregisterNativeEventHandler(b,"blur",AdtechAdVisibility.Utils.createClosure(this,this.onBlurHandler)),AdtechAdVisibility.Utils.deregisterNativeEventHandler(b,"message",AdtechAdVisibility.Utils.createClosure(this,this.onMessageHandler)),AdtechAdVisibility.Utils.deregisterNativeEventHandler(b.self,"beforeunload",AdtechAdVisibility.Utils.createClosure(this,this.stopMeasurementActivity))},AdtechAdVisibility.AdVisibilityManager.prototype.startPageTimer=function(){this.pageTimerIsRunning||this.timersFlushed||(this.pageTimerIntervalId=setInterval(AdtechAdVisibility.Utils.createClosure(this,this.pageTimerHandler),1e3),this.pageTimerIsRunning=!0)},AdtechAdVisibility.AdVisibilityManager.prototype.stopPageTimer=function(){this.pageTimerIsRunning&&(clearInterval(this.pageTimerIntervalId),this.pageTimerIsRunning=!1)},AdtechAdVisibility.AdVisibilityManager.prototype.startFlushTimer=function(){var a=500;this.flushTimerIsRunning||(this.flushTimerIsRunning=!0,this.flushTimerTimeout=setTimeout(AdtechAdVisibility.Utils.createClosure(this,this.stopMeasurementActivity),AdtechAdVisibility.AdVisibilityManager.TIME_TO_FLUSH+a))},AdtechAdVisibility.AdVisibilityManager.prototype.stopFlushTimer=function(){this.flushTimerIsRunning&&(clearTimeout(this.flushTimerTimeout),this.flushTimerIsRunning=!1)},AdtechAdVisibility.AdVisibilityManager.prototype.removeSafeFrameDataHandler=function(){this.safeFrameTimer&&(clearInterval(this.safeFrameTimer),this.safeFrameTimer=null)},AdtechAdVisibility.AdVisibilityManager.prototype.safeFrameStatusUpdate=function(a){"geom-update"!==a||this.timersFlushed||this.getSafeFrameGeometry()},AdtechAdVisibility.AdVisibilityManager.prototype.startSafeFrameTimer=function(){void 0===this.safeFrameTimer&&(this.safeFrameTimer=setInterval(AdtechAdVisibility.Utils.createClosure(this,this.getSafeFrameGeometry),AdtechAdVisibility.AdVisibilityManager.SAFE_FRAME_GEOMETRY_RETRIEVAL_INTERVAL))},AdtechAdVisibility.AdVisibilityManager.prototype.getSafeFrameGeometry=function(){var a=AdtechAdVisibility.AdVisibilityUtils.transformSafeFrameGeometry($sf.ext.geom(),this.adjustSafeFrameGeometry);a.parentWindowInFocus=!0,this.parentWindowInFocus=!0,AdtechAdVisibility.AdVisibilityUtils.dispatchParentViewportEvent(this.globalEventBus,a)},AdtechAdVisibility.AdVisibilityManager.prototype.stopMeasurementActivity=function(a){this.timersFlushed||(this.timersFlushed=!0,this.stopFlushTimer(),this.stopPageTimer(),this.dispatchFlushTimerEvent(),this.nonFIFrameEnvironment&&!this.nonFIFrameRegistrationDone?(this.sendNFIFrameIndeterminableEvent(),this.nonFIFrameRegistrationDone=!0):a!==!0&&this.sendRemainingValuesForAllBanners(),this.removeNativeEventHandlers(this.nonFIFrameEnvironment?window:window.top),this.removeSafeFrameDataHandler())},AdtechAdVisibility.AdVisibilityManager.prototype.dispatchFlushTimerEvent=function(){this.globalEventBus.dispatchEvent(AdtechAdVisibility.AdVisibilityEvent.TIMERS_FLUSHED)},AdtechAdVisibility.AdVisibilityManager.prototype.sendNFIFrameIndeterminableEvent=function(){for(var a in this.banners){var b=this.banners[a];b.bannerConfig.visibleEventFired||this.sendIndeterminableImpression(b.bannerConfig,AdtechAdVisibility.RichMediaEventType.INDETERMINABLE_IFRAME_NON_FRIENDLY)}},AdtechAdVisibility.AdVisibilityManager.prototype.sendRemainingValuesForAllBanners=function(){for(var a in this.banners){var b=this.banners[a];this.sendRemainingValues(b)}},AdtechAdVisibility.AdVisibilityManager.prototype.sendRemainingValues=function(a){var b,c,d,e,f,g,h;b=a.getBannerConfig(),e=Math.round(a.getViewTimeMsec()/1e3),f=a.getMaxViewAreaPercent(),c=AdtechAdVisibility.RichMediaEventType.VIEWTIME+","+AdtechAdVisibility.RichMediaEventType.TOTALTIME+","+AdtechAdVisibility.RichMediaEventType.getAreaPercentId(f),d=e+","+this.pageTime+","+AdtechAdVisibility.AdVisibilityManager.DEFAULT_EVENT_VALUE,a.isCustomVisibleImpressions()&&(g=Math.round(a.getCustomViewTimeMsec()/1e3),h=a.getCustomMaxViewAreaPercent(),c+=","+AdtechAdVisibility.RichMediaEventType.CUSTOM_VIEWTIME+","+AdtechAdVisibility.RichMediaEventType.getAreaPercentId(h,!0),d+=","+g+","+AdtechAdVisibility.AdVisibilityManager.DEFAULT_EVENT_VALUE),this.sendRequest(b,c,d)},AdtechAdVisibility.AdVisibilityManager.prototype.sendVisibleImpression=function(a){var b=AdtechAdVisibility.RichMediaEventType.VISIBLE_IMP,c=AdtechAdVisibility.AdVisibilityManager.DEFAULT_EVENT_VALUE;this.sendRequest(a,b,c)},AdtechAdVisibility.AdVisibilityManager.prototype.sendCustomVisibleImpression=function(a){var b=AdtechAdVisibility.RichMediaEventType.CUSTOM_VISIBLE_IMP,c=AdtechAdVisibility.AdVisibilityManager.DEFAULT_EVENT_VALUE;this.sendRequest(a,b,c)},AdtechAdVisibility.AdVisibilityManager.prototype.sendViewCountEvent=function(a){this.trackings_view_events[a.placementId].src=a.viewEventURL},AdtechAdVisibility.AdVisibilityManager.prototype.sendIndeterminableImpression=function(a,b){var c=b,d=AdtechAdVisibility.AdVisibilityManager.DEFAULT_EVENT_VALUE;this.sendRequest(a,c,d)},AdtechAdVisibility.AdVisibilityManager.prototype.sendRequest=function(a,b,c){var d=a.placementId;if(AdtechAdVisibility.RichMediaEventType.CUSTOM_VISIBLE_IMP===b&&(d="custom"+a.placementId),a.isSelectedBySampling&&""!=a.adserver){var e=this.buildBaseUrl(a.adserver,"custrmevent/3.0",a)+"EventIds="+b+";EventVals="+c;this.trackings[d].src=e}if(""!=a.advisServer){var e=this.buildBaseUrl(a.advisServer,"advis/3",a)+"EventIds="+b+";EventVals="+c+";CampaignNetworkId="+a.campaignNetworkId+";CampaignSubNetworkId="+a.campaignSubNetworkId+";AssetId="+a.bannerUid;this.trackings_2[d].src=e}},AdtechAdVisibility.AdVisibilityManager.prototype.buildBaseUrl=function(a,b,c){var d=c.adProtocol,e=c.mainNetworkId,f=c.subNetworkId,g=c.placementId,h=c.pageId,i=c.sizeId,j=c.adId,k=c.creativeId,l=c.bannerId,m=d+"://"+a+"/"+b+"/"+e+"."+f+"/"+g+"/"+h+"/"+i+"/AdId="+j+";CreativeId="+k+";BnId="+l+";";return m},AdtechAdVisibility.AdVisibilityManager.prototype.dispatchViewPortEvent=function(a){this.globalEventBus.dispatchEvent(new AdtechAdVisibility.AdVisibilityEvent(a))},AdtechAdVisibility.AdVisibilityManager.prototype.errorHandler=function(a){a.target.error},AdtechAdVisibility.AdVisibilityManager.prototype.visibleImpressionHandler=function(a){var b=a.bannerConfig,c=this.banners[b.placementId];c.removeEventListener(AdtechAdVisibility.AdVisibilityEvent.VISIBLE_IMPRESSION,this.visibleImpressionHandler,this),this.sendVisibleImpression(b),c.isViewEvents()&&!b.isAdvisGoalCustomSettings&&this.sendViewCountEvent(b)},AdtechAdVisibility.AdVisibilityManager.prototype.customVisibleImpressionHandler=function(a){var b=a.bannerConfig,c=this.banners[b.placementId];c.removeEventListener(AdtechAdVisibility.AdVisibilityEvent.CUSTOM_VISIBLE_IMPRESSION,this.visibleImpressionHandler,this),this.sendCustomVisibleImpression(b),c.isViewEvents()&&b.isAdvisGoalCustomSettings&&this.sendViewCountEvent(b)},AdtechAdVisibility.AdVisibilityManager.prototype.registrationCompleteHandler=function(){this.dispatchViewPortEvent(AdtechAdVisibility.AdVisibilityEvent.BANNER_REGISTER)},AdtechAdVisibility.AdVisibilityManager.prototype.pageTimerHandler=function(){this.pageTimerIsRunning&&(this.windowInFocus||this.parentWindowInFocus)&&(this.pageTime=this.pageTime+1)},AdtechAdVisibility.AdVisibilityManager.prototype.scrollHandler=function(){this.dispatchViewPortEvent(AdtechAdVisibility.AdVisibilityEvent.PAGE_SCROLL)},AdtechAdVisibility.AdVisibilityManager.prototype.resizeHandler=function(){this.dispatchViewPortEvent(AdtechAdVisibility.AdVisibilityEvent.PAGE_RESIZE)},AdtechAdVisibility.AdVisibilityManager.prototype.onLoadHandler=function(){this.dispatchViewPortEvent(AdtechAdVisibility.AdVisibilityEvent.PAGE_LOAD)},AdtechAdVisibility.AdVisibilityManager.prototype.iFrameOnLoadHandler=function(a){setTimeout(AdtechAdVisibility.Utils.createClosure(this,this.initBannerDelayed,a),200)},AdtechAdVisibility.AdVisibilityManager.prototype.onBlurHandler=function(){this.windowInFocus=!1,AdtechAdVisibility.AdVisibilityUtils.dispatchElementFocusEvent(this.globalEventBus,this.windowInFocus)},AdtechAdVisibility.AdVisibilityManager.prototype.onFocusHandler=function(){this.windowInFocus=!0,AdtechAdVisibility.AdVisibilityUtils.dispatchElementFocusEvent(this.globalEventBus,this.windowInFocus),this.dispatchViewPortEvent(AdtechAdVisibility.AdVisibilityEvent.PAGE_LOAD)},AdtechAdVisibility.AdVisibilityManager.prototype.onMessageHandler=function(a){var b,c=window.AdtechAdVisibilityTools.NonFIFrameMessage;a.data.length&&(b=new c(a.data),b.getMessageType()===c.NON_FIF_REGISTRATION_COMPLETE?this.onNonFIFRegistrationComplete(b.getMessageData()):b.getMessageType()==c.NON_FIF_PARENT_VIEWPORT_UPDATE?this.onNonFIFParentViewportUpdate(b.getMessageData()):b.getMessageType()==c.NON_FIF_PARENT_FOCUS?this.onNonFIFParentFocusUpdate(b.getMessageData()):b.getMessageType()==c.DOM_LOAD_TIMEOUT&&this.onParentDOMTimeout(b.getMessageData()))},AdtechAdVisibility.AdVisibilityManager.prototype.onNonFIFRegistrationComplete=function(a){var b;a.length>0&&(this.nonFIFrameRegistrationDone=!0,b=AdtechAdVisibilityTools.NonFIFrameMessage.decodeIFrameViewportGeometry(a),AdtechAdVisibility.AdVisibilityUtils.dispatchParentViewportEvent(this.globalEventBus,b))},AdtechAdVisibility.AdVisibilityManager.prototype.onNonFIFParentViewportUpdate=function(a){var b;a.length>0&&this.nonFIFrameRegistrationDone&&(b=AdtechAdVisibilityTools.NonFIFrameMessage.decodeIFrameViewportGeometry(a),AdtechAdVisibility.AdVisibilityUtils.dispatchParentViewportEvent(this.globalEventBus,b))},AdtechAdVisibility.AdVisibilityManager.prototype.onNonFIFParentFocusUpdate=function(a){a.length>0&&(this.parentWindowInFocus="true"===a,AdtechAdVisibility.AdVisibilityUtils.dispatchParentFocusEvent(this.globalEventBus,this.parentWindowInFocus))},AdtechAdVisibility.AdVisibilityManager.prototype.onParentDOMTimeout=function(a){var b,c,d=this.banners[a];d&&!d.visibleEventFired&&(b=AdtechAdVisibility.RichMediaEventType.INDETERMINABLE_IFRAME_NON_FRIENDLY+","+AdtechAdVisibility.RichMediaEventType.NON_FRIENDLY_IFRAME_PARENT_DOM_TIMEDOUT,c=AdtechAdVisibility.AdVisibilityManager.DEFAULT_EVENT_VALUE+","+AdtechAdVisibility.AdVisibilityManager.DEFAULT_EVENT_VALUE,this.sendRequest(d.bannerConfig,b,c),this.stopMeasurementActivity(!0))},AdtechAdVisibility.AdVisibilityManager.prototype.bannerChanged=function(a,b){var c=this.banners[a];c&&b&&("undefined"!=typeof b.useAltGeometry?c.geometryChanged(!!b.useAltGeometry):b.deactivateBanner===!0&&c.timersFlushedHandler())};var adtechAdVisibilityManager=new AdtechAdVisibility.AdVisibilityManager;